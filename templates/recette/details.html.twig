{% extends 'base.html.twig' %}

{% block title %}Détails de la recette{% endblock %}

{% block body %}
    <h1>{{ recette.titre }}</h1>
    <p>{{ recette.description }}</p>

    <h2>Commentaires</h2>
    {% for commentaire in recette.commentaires %}
        <div>
            <p><strong>{{ commentaire.date|date('d/m/Y H:i') }}</strong>: {{ commentaire.contenu }}</p>
            {% if app.user == commentaire.auteur %}
                <a href="{{ path('commentaire_editer', { id: commentaire.id }) }}">Éditer</a>
                <form action="{{ path('commentaire_supprimer', { id: commentaire.id }) }}" method="post" style="display:inline;">
                    <input type="hidden" name="_token" value="{{ csrf_token('supprimer' ~ commentaire.id) }}">
                    <button type="submit">Supprimer</button>
                </form>
            {% endif %}
        </div>
    {% else %}
        <p>Aucun commentaire pour cette recette.</p>
    {% endfor %}

    <h2>Ajouter un commentaire</h2>
    {{ form_start(form) }}
        {{ form_widget(form) }}
        <button type="submit">Envoyer</button>
    {{ form_end(form) }}

    {% for message in app.flashes('success') %}
        <div class="alert alert-success">
            {{ message }}
        </div>
    {% endfor %}
{% endblock %}
